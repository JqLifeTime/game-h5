import{d as e,r as a,k as s,K as t,b as l,p as u,f as o,w as n,e as c,F as i,q as r,B as v,u as d,G as p,H as f,L as m,m as h,t as _,s as b,D as g,i as x,g as y,y as T,a as k,x as E,_ as F}from"./index-62c93e24.js";import{s as L,t as X}from"./index.03574bd1.js";import{a as Y}from"./uni-app.es.ba5b2566.js";const j=F(e({__name:"project-sort",setup(e){const F=a(0),j=a(0),O=a(null),$=a(!1),w=a([]),I=a(0),S=a([]),q=a(!1),B=s((()=>{let e=[];return S.value=[],w.value.length&&(e.length=w.value[I.value].cardOptionsList.length,e.fill(null),setTimeout((()=>{e.forEach(((e,a)=>{k().select(`#btm${I.value}${a}`).boundingClientRect((e=>{S.value.push({startX:e.left-42,startY:e.top-42,endX:e.left-42+120,endY:e.top-42+120})})).exec()}))}),500)),e}));function C(e){const a=e.touches[0];F.value=a.clientX-42,j.value=a.clientY-42}Y((e=>{var a;a=e.id,t(a).then((e=>{200==e.code&&(w.value=e.data,w.value.forEach((e=>{e.cardOptionsList=L(e.cardOptionsList)})),console.log(w.value))}))}));let D=X((function(e){C(e)}),24);function G(){$.value=!1;let e=-1;if(S.value.forEach(((a,s)=>{F.value>=a.startX&&F.value<=a.endX&&j.value>=a.startY&&j.value<=a.endY&&(e=s)})),-1===e)uni.audioTipsError.play(),b({title:"这个不对~",mask:!0,icon:"none"});else{const a=B.value.findIndex((e=>!e));a===e&&a+1===O.value.sort?(uni.audioTipsSuccess.play(),B.value[e]=O.value.substance,a===B.value.length-1&&(q.value=!0)):(uni.audioTipsError.play(),b({title:"这个不对~",mask:!0,icon:"none"}))}}function H(){q.value=!1,I.value<w.value.length-1?I.value+=1:(b({title:"恭喜您全部完成啦~",mask:!0}),setTimeout((()=>{g({url:"/pages/game-pass/game-pass"})}),1e3))}return(e,a)=>{const s=x,t=y,b=E,g=T("TipsSuccess");return l(),u(i,null,[o(t,{class:"box"},{default:n((()=>[o(t,{class:"box-cen"},{default:n((()=>[o(t,{class:"box-cen-left"},{default:n((()=>[o(t,{class:"sort"},{default:n((()=>[w.value.length?(l(),c(t,{key:0,class:"sort-top"},{default:n((()=>[(l(!0),u(i,null,r(w.value[I.value].cardOptionsList,((e,a)=>(l(),c(t,{class:"sort-top-item",key:e.id,onTouchstart:a=>{return s=a,t=e,O.value=t,$.value=!0,void C(s);var s,t},onTouchmove:d(D),onTouchend:G},{default:n((()=>[o(s,{src:e.substance,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["onTouchstart","onTouchmove"])))),128))])),_:1})):v("",!0),o(t,{class:"sort-line"}),o(t,{class:"sort-btm"},{default:n((()=>[(l(!0),u(i,null,r(d(B),((e,a)=>(l(),c(t,{class:"sort-btm-item",id:`btm${I.value}${a}`},{default:n((()=>[e?(l(),c(s,{key:0,src:e,mode:"aspectFit"},null,8,["src"])):(l(),c(b,{key:1},{default:n((()=>[h(_(a+1),1)])),_:2},1024))])),_:2},1032,["id"])))),256))])),_:1}),p(o(t,{class:"box-position",style:m({left:F.value+"px",top:j.value+"px"})},{default:n((()=>[O.value?(l(),c(s,{key:0,src:O.value.substance,mode:"aspectFit"},null,8,["src"])):v("",!0)])),_:1},8,["style"]),[[f,$.value]])])),_:1})])),_:1}),w.value.length?(l(),c(t,{key:0,class:"box-cen-right"},{default:n((()=>[h(_(w.value[I.value].name),1)])),_:1})):v("",!0)])),_:1})])),_:1}),o(g,{show:q.value,onNext:H},null,8,["show"])],64)}}}),[["__scopeId","data-v-c1d9edb0"]]);export{j as default};
