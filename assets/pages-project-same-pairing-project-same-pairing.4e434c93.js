import{d as s,r as a,c as e,O as t,J as l,b as u,i,f as o,w as n,g as c,h as d,F as r,j as p,t as v,e as m,x as f,C as g,D as h,I as _,v as O,A as b,l as x,k as y,p as L,_ as T}from"./index-be39c4e6.js";import{s as k,t as E}from"./index.03574bd1.js";import{a as j}from"./uni-app.es.b913e102.js";const X=T(s({__name:"project-same-pairing",setup(s){const T=a(0),X=a(0),Y=a(!1),F=a([]),w=a(0),S=a(0),C=a(!1),I=e((()=>F.value.length?F.value[w.value]:null)),$=a([]);function A(s){Y.value=!0,D(s)}function D(s){const a=s.touches[0];T.value=a.clientX-42,X.value=a.clientY-42}j((s=>{var a;a=s.id,t(a).then((s=>{200==s.code&&(F.value=s.data,F.value.forEach((s=>{s.originOtionsList=s.cardOptionsList.slice(),s.cardOptionsList=k(s.cardOptionsList)})),setTimeout((()=>{F.value[0].cardOptionsList.forEach(((s,a)=>{l().select(`#btm${a}`).boundingClientRect((s=>{$.value.push({startX:s.left-42,startY:s.top-42,endX:s.left-42+120,endY:s.top-42+120})})).exec()}))}),500),console.log(F.value))}))}));let G=E((function(s){D(s)}),24);function J(){Y.value=!1;let s=-1;$.value.forEach(((a,e)=>{T.value>=a.startX&&T.value<=a.endX&&X.value>=a.startY&&X.value<=a.endY&&(s=e)})),-1===s?(uni.audioTipsError.play(),O({title:"这个不对~",mask:!0,icon:"none"})):I.value.cardOptionsList[s].id===I.value.originOtionsList[S.value].id?S.value<I.value.cardOptionsList.length-1?(S.value++,uni.audioTipsSuccess.play(),O({title:"恭喜放对啦~",mask:!0})):w.value<F.value.length-1?(uni.audioTipsSuccess.play(),C.value=!0):(O({title:"恭喜您全部完成啦~",mask:!0}),setTimeout((()=>{b({url:"/pages/game-pass/game-pass"})}),1e3)):(uni.audioTipsError.play(),O({title:"这个不对~",mask:!0,icon:"none"}))}function N(){C.value=!1,S.value=0,w.value+=1}return(s,a)=>{const e=x,t=y,l=L("TipsSuccess");return u(),i(r,null,[o(e,{class:"box"},{default:n((()=>[o(e,{class:"same"},{default:n((()=>[o(e,{class:"same-top"},{default:n((()=>[o(e,{class:"same-top-title"},{default:n((()=>[c(" 相同的放在一起 ")])),_:1}),o(e,{class:"same-top-img",onTouchstart:A,onTouchmove:d(G),onTouchend:J},{default:n((()=>[(u(),i(r,null,p(3,(s=>o(e,{class:"same-top-img-item",key:s},{default:n((()=>[d(I)?(u(),m(t,{key:0,src:d(I).originOtionsList[S.value].substance,mode:"aspectFit"},null,8,["src"])):f("",!0)])),_:2},1024))),64))])),_:1},8,["onTouchmove"]),o(e,{class:"same-top-desc"},{default:n((()=>[c(" 将图片拖动到下方正确位置 ")])),_:1}),o(e,{class:"same-top-idx"},{default:n((()=>[c(" 第"+v(w.value+1)+"题,共"+v(F.value.length)+"题 ",1)])),_:1})])),_:1}),d(I)?(u(),m(e,{key:0,class:"same-btm"},{default:n((()=>[(u(!0),i(r,null,p(d(I).cardOptionsList,((s,a)=>(u(),m(e,{class:"same-btm-item",id:`btm${a}`,key:s.id},{default:n((()=>[o(t,{src:s.substance,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["id"])))),128))])),_:1})):f("",!0),g(o(e,{class:"box-position",style:_({left:T.value+"px",top:X.value+"px"})},{default:n((()=>[d(I)?(u(),m(t,{key:0,src:d(I).originOtionsList[S.value].substance,mode:"aspectFit"},null,8,["src"])):f("",!0)])),_:1},8,["style"]),[[h,Y.value]])])),_:1})])),_:1}),o(l,{show:C.value,onNext:N},null,8,["show"])],64)}}}),[["__scopeId","data-v-e60ee113"]]);export{X as default};
