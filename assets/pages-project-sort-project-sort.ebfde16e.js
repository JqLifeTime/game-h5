import{d as e,r as a,c as s,H as t,b as l,i as u,f as o,w as n,e as c,F as i,j as r,x as v,h as d,C as p,D as f,I as m,g as h,t as _,v as b,A as g,k as x,l as y,p as T,J as k,m as E,_ as j}from"./index-be39c4e6.js";import{s as X,t as Y}from"./index.03574bd1.js";import{a as F}from"./uni-app.es.b913e102.js";const L=j(e({__name:"project-sort",setup(e){const j=a(0),L=a(0),O=a(null),$=a(!1),w=a([]),I=a(0),C=a([]),S=a(!1),A=s((()=>{let e=[];return C.value=[],w.value.length&&(e.length=w.value[I.value].cardOptionsList.length,e.fill(null),setTimeout((()=>{e.forEach(((e,a)=>{k().select(`#btm${I.value}${a}`).boundingClientRect((e=>{C.value.push({startX:e.left-42,startY:e.top-42,endX:e.left-42+120,endY:e.top-42+120})})).exec()}))}),500)),e}));function D(e){const a=e.touches[0];j.value=a.clientX-42,L.value=a.clientY-42}F((e=>{var a;a=e.id,t(a).then((e=>{200==e.code&&(w.value=e.data,w.value.forEach((e=>{e.cardOptionsList=X(e.cardOptionsList)})),console.log(w.value))}))}));let G=Y((function(e){D(e)}),24);function H(){$.value=!1;let e=-1;if(C.value.forEach(((a,s)=>{j.value>=a.startX&&j.value<=a.endX&&L.value>=a.startY&&L.value<=a.endY&&(e=s)})),-1===e)uni.audioTipsError.play(),b({title:"这个不对~",mask:!0,icon:"none"});else{const a=A.value.findIndex((e=>!e));a===e&&a+1===O.value.sort?(uni.audioTipsSuccess.play(),A.value[e]=O.value.substance,a===A.value.length-1&&(S.value=!0)):(uni.audioTipsError.play(),b({title:"这个不对~",mask:!0,icon:"none"}))}}function J(){S.value=!1,I.value<w.value.length-1?I.value+=1:(b({title:"恭喜您全部完成啦~",mask:!0}),setTimeout((()=>{g({url:"/pages/game-pass/game-pass"})}),1e3))}return(e,a)=>{const s=x,t=y,b=E,g=T("TipsSuccess");return l(),u(i,null,[o(t,{class:"box"},{default:n((()=>[o(t,{class:"box-cen"},{default:n((()=>[o(t,{class:"box-cen-left"},{default:n((()=>[o(t,{class:"sort"},{default:n((()=>[w.value.length?(l(),c(t,{key:0,class:"sort-top"},{default:n((()=>[(l(!0),u(i,null,r(w.value[I.value].cardOptionsList,((e,a)=>(l(),c(t,{class:"sort-top-item",key:e.id,onTouchstart:a=>{return s=a,t=e,O.value=t,$.value=!0,void D(s);var s,t},onTouchmove:d(G),onTouchend:H},{default:n((()=>[o(s,{src:e.substance,mode:"aspectFit"},null,8,["src"])])),_:2},1032,["onTouchstart","onTouchmove"])))),128))])),_:1})):v("",!0),o(t,{class:"sort-line"}),o(t,{class:"sort-btm"},{default:n((()=>[(l(!0),u(i,null,r(d(A),((e,a)=>(l(),c(t,{class:"sort-btm-item",id:`btm${I.value}${a}`},{default:n((()=>[e?(l(),c(s,{key:0,src:e,mode:"aspectFit"},null,8,["src"])):(l(),c(b,{key:1},{default:n((()=>[h(_(a+1),1)])),_:2},1024))])),_:2},1032,["id"])))),256))])),_:1}),p(o(t,{class:"box-position",style:m({left:j.value+"px",top:L.value+"px"})},{default:n((()=>[O.value?(l(),c(s,{key:0,src:O.value.substance,mode:"aspectFit"},null,8,["src"])):v("",!0)])),_:1},8,["style"]),[[f,$.value]])])),_:1})])),_:1}),w.value.length?(l(),c(t,{key:0,class:"box-cen-right"},{default:n((()=>[h(_(w.value[I.value].name),1)])),_:1})):v("",!0)])),_:1})])),_:1}),o(g,{show:S.value,onNext:J},null,8,["show"])],64)}}}),[["__scopeId","data-v-c1d9edb0"]]);export{L as default};
