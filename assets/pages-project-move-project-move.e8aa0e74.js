import{d as e,a6 as t,r as a,o as l,J as n,b as o,e as h,w as i,f as s,z as r,h as u,k as v,l as d,a8 as c,v as f,_ as g}from"./index-bd0a08d3.js";import{d as m}from"./index.03574bd1.js";const x=g(e({__name:"project-move",setup(e){let g=null,x=null,y=null,w=null;const L=t("moveGame");t("moveGameArrow");const T=a(!1),W=a(!1),b=a([]),p=a({x:50,y:100,width:6,height:30,arrowWidth:8,shaftLength:60,featherWidth:7,featherLength:12,vx:1.5,vy:10,color:"#FFAC02",isObstacle:!1});function _(){const e={x:g,y:x-68,width:60,height:51,vx:1.4,vy:1.4,isObstacle:!0};b.value.push(e)}function F(e){L.beginPath(),L.moveTo(e.x-e.width/2,e.y),L.lineTo(e.x+e.width/2,e.y),L.lineTo(e.x+e.width/2,e.y-e.shaftLength),L.lineTo(e.x-e.width/2,e.y-e.shaftLength),L.closePath(),L.fillStyle=e.color,L.fill(),L.beginPath(),L.moveTo(e.x-e.arrowWidth,e.y-e.arrowWidth/2),L.lineTo(e.x,e.y),L.lineTo(e.x+e.arrowWidth,e.y-e.arrowWidth/2),L.lineTo(e.x,e.y+e.arrowWidth),L.lineTo(e.x-e.arrowWidth,e.y-e.arrowWidth/2),L.closePath(),L.fillStyle=e.color,L.fill(),L.beginPath(),L.moveTo(e.x-e.featherWidth,e.y-e.shaftLength-e.featherLength),L.lineTo(e.x,e.y-e.shaftLength+e.featherWidth-e.featherLength),L.lineTo(e.x+e.featherWidth,e.y-e.shaftLength-e.featherLength),L.lineTo(e.x+e.featherWidth,e.y-e.shaftLength/2-e.featherLength),L.lineTo(e.x,e.y-e.shaftLength+2*e.featherLength),L.lineTo(e.x-e.featherWidth,e.y-e.shaftLength/2-e.featherLength),L.lineTo(e.x-e.featherWidth,e.y-e.shaftLength-e.featherLength),L.closePath(),L.fillStyle=e.color,L.fill()}l((()=>{n().select("#move-game").boundingClientRect((e=>{g=e.width,x=e.height,console.log(g,x),_()})).exec()}));const A=m((function e(){if(T.value||W.value)return T.value=!1,null;window&&window.requestAnimationFrame?requestAnimationFrame(e):(clearInterval(y),y=setInterval((()=>{e()}),0)),p.value.y>=x-50?(b.value.some((e=>e.isObstacle&&p.value.x>=e.x&&p.value.x<=e.x+e.width))?(console.log("Collision!"),f({title:"游戏结束！",icon:"none"}),W.value=!0):(b.value.push({...p.value}),T.value=!0),p.value.y=20):p.value.y>0&&(p.value.y=p.value.y+p.value.vy,F(p.value),console.log(p.value.y))}),500,!0);function I(){b.value.forEach(((e,t)=>{var a;L.clearRect(e.x,e.y,e.width,e.height),e.x-=e.vx,e.x>-e.width?(a=e).isObstacle?L.drawImage("/static/index/game_obstacle.png",a.x,a.y,a.width,a.height):F(a):(b.value.splice(t,1),b.value.length<3&&_())})),L.draw()}return function e(){if(W.value)return null;window&&window.requestAnimationFrame?requestAnimationFrame(e):(clearInterval(w),w=setInterval((()=>{e()}),0)),I()}(),(e,t)=>{const a=v,l=d,n=c;return o(),h(l,{class:"move"},{default:i((()=>[s(l,{class:"move-bg"},{default:i((()=>[s(a,{class:r({moveimg:!W.value}),src:"/assets/move_game_bg-91dff990.png",mode:"heightFix"},null,8,["class"])])),_:1}),s(n,{"canvas-id":"moveGame",onTouchstart:u(A),id:"move-game",style:{width:"100%",height:"100%"}},null,8,["onTouchstart"])])),_:1})}}}),[["__scopeId","data-v-2549a94a"]]);export{x as default};
