import{d as a,r as s,k as e,R as l,a9 as t,b as u,p as n,f as r,w as c,m as i,u as d,e as o,F as f,q as p,B as v,t as m,s as h,D as _,g,y as O,n as b,i as L,a0 as y,_ as C}from"./index-62c93e24.js";import{s as I}from"./index.03574bd1.js";import{a as w,b as k}from"./uni-app.es.ba5b2566.js";const x=C(a({__name:"project-cardtonumber",setup(a){let C=null,x=null;const E=s([]),j=s(0),F=s(!1),T=s("success"),V=s(10),N=s(""),R=s(0),S=e((()=>E.value[j.value]));function B(){V.value=10,N.value="",R.value=0,C=setInterval((()=>{if(0===V.value)return clearInterval(C),clearInterval(x),void(x=setInterval((()=>{R.value+=1;const a=parseInt(""+R.value/3600),s=parseInt(""+R.value/60%60),e=parseInt(""+R.value%60);let l=U(a)+" : "+U(s)+" : "+U(e);N.value=l}),1e3/60));V.value-=1}),1e3)}function D(){if(S.value.shuffleCardOptionsList.filter((a=>null!==a.answer)).length===S.value.shuffleCardOptionsList.length){const a=S.value.shuffleCardOptionsList.filter((a=>a.answer==a.isRight)).length;F.value=!0,a===S.value.shuffleCardOptionsList.length?(T.value="success",uni.audioTipsSuccess.play()):(T.value="error",uni.audioTipsError.play()),J()}}function J(){clearInterval(x),x=null}function U(a){return a<10?"0"+a:""+a}function q(){j.value<E.value.length-1?(j.value+=1,F.value=!1):(h({title:"恭喜您，已全部完成~"}),setTimeout((()=>{_({url:"/pages/game-pass/game-pass"})}),1e3))}function z(){F.value=!1,S.value.shuffleCardOptionsList.forEach((a=>{a.answer=null})),B()}return l((()=>j.value),(a=>{a&&B()})),w((a=>{var s;s=a.id,t(s).then((a=>{console.log(27,a),200==a.code&&(E.value=a.data,E.value.forEach((a=>{const s=JSON.parse(JSON.stringify(a.cardOptionsList));a.shuffleCardOptionsList=I(s),a.shuffleCardOptionsList.forEach((a=>{a.answer=null}))})),B())}))})),k((()=>{C=null,clearInterval(C),J()})),(a,s)=>{const e=g,l=L,t=y,h=O("TipsDesign");return u(),n(f,null,[r(e,{class:"box"},{default:c((()=>[r(e,{class:"card"},{default:c((()=>[r(e,{class:"card-title"},{default:c((()=>[i(" 请记住卡片对应的数字，倒计时结束后请填写对应卡片数字 ")])),_:1}),d(S)&&d(S).cardOptionsList&&d(S).cardOptionsList.length?(u(),o(e,{key:0,class:"card-top"},{default:c((()=>[V.value>0?(u(!0),n(f,{key:0},p(d(S).cardOptionsList,(a=>(u(),o(e,{class:b(["card-top-item",d(S).cardOptionsList]),key:a.id},{default:c((()=>[r(l,{class:"card-img",src:a.substance,mode:"aspectFit"},null,8,["src"]),r(e,{class:"card-number"},{default:c((()=>[i(m(a.isRight),1)])),_:2},1024)])),_:2},1032,["class"])))),128)):(u(!0),n(f,{key:1},p(d(S).shuffleCardOptionsList,(a=>(u(),o(e,{class:b(["card-top-item",d(S).shuffleCardOptionsList]),key:a.id},{default:c((()=>[r(l,{class:"card-img",src:a.substance,mode:"aspectFit"},null,8,["src"]),r(e,{class:"card-input"},{default:c((()=>[r(t,{type:"number",onBlur:D,modelValue:a.answer,"onUpdate:modelValue":s=>a.answer=s,placeholder:"请输入"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})):v("",!0),r(e,{class:"card-btm"},{default:c((()=>[r(e,{class:"card-btm-left"},{default:c((()=>[i(" 第"+m(j.value+1)+"题 ",1)])),_:1}),r(e,{class:"card-btm-center"},{default:c((()=>[i(m(V.value>0?V.value:N.value),1)])),_:1}),r(e,{class:"card-btm-right"},{default:c((()=>[i(" 共"+m(E.value.length)+"题 ",1)])),_:1})])),_:1})])),_:1})])),_:1}),r(h,{type:T.value,show:F.value,onNext:q},{default:c((()=>[r(e,{class:"cardtips"},{default:c((()=>[r(e,{class:"cardtips-time"},{default:c((()=>[i(" 用时："+m(N.value),1)])),_:1}),r(e,{class:"cardtips-btn",onClick:z},{default:c((()=>[i(" 再来一次 ")])),_:1})])),_:1})])),_:1},8,["type","show"])],64)}}}),[["__scopeId","data-v-6b1f6828"]]);export{x as default};
